# –ò—Ç–æ–≥–æ–≤—ã–π —Å—Ç–∞—Ç—É—Å SeaBattle MiniApp

## ‚úÖ –ß—Ç–æ —Ä–∞–∑–≤–µ—Ä–Ω—É—Ç–æ

- **URL**: https://qualityagency.ru
- **Server**: 94.228.124.97
- **SSL**: Let's Encrypt (–∞–≤—Ç–æ–æ–±–Ω–æ–≤–ª–µ–Ω–∏–µ)
- **PM2**: –ü—Ä–æ—Ü–µ—Å—Å –∑–∞–ø—É—â–µ–Ω –∏ —Ä–∞–±–æ—Ç–∞–µ—Ç
- **–ë–∞–∑–∞ –¥–∞–Ω–Ω—ã—Ö**: PostgreSQL –Ω–∞—Å—Ç—Ä–æ–µ–Ω–∞ –∏ –∑–∞–ø–æ–ª–Ω–µ–Ω–∞

## ‚ö†Ô∏è –¢–µ–∫—É—â–∞—è –ø—Ä–æ–±–ª–µ–º–∞

**–û—à–∏–±–∫–∞**: "–ù–µ —É–¥–∞–ª–æ—Å—å —Å–æ–∑–¥–∞—Ç—å –∏–≥—Ä—É —Å –±–æ—Ç–æ–º"

### –î–∏–∞–≥–Ω–æ—Å—Ç–∏–∫–∞
1. ‚úÖ –ó–∞–ø—Ä–æ—Å –¥–æ—Ö–æ–¥–∏—Ç –¥–æ —Å–µ—Ä–≤–µ—Ä–∞ (`POST /api/game/bot` –≤–∏–¥–µ–Ω –≤ –ª–æ–≥–∞—Ö)
2. ‚ùå Auth middleware –Ω–µ —Å—Ä–∞–±–∞—Ç—ã–≤–∞–µ—Ç (–ª–æ–≥–∏ "Auth middleware - path" –Ω–µ –ø–æ—è–≤–ª—è—é—Ç—Å—è –¥–ª—è `/api/game/bot`)
3. ‚ùå –ó–∞–ø—Ä–æ—Å –Ω–µ –¥–æ—Ö–æ–¥–∏—Ç –¥–æ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫–∞ `POST /api/game/bot`

### –ü—Ä–∏—á–∏–Ω–∞
–ü–æ—Ö–æ–∂–µ, —á—Ç–æ auth middleware –ø—Ä–∏–º–µ–Ω—è–µ—Ç—Å—è –∫–æ –≤—Å–µ–º –ø—É—Ç—è–º `/api/*`, –∏ –∑–∞–ø—Ä–æ—Å –æ—Ç–∫–ª–æ–Ω—è–µ—Ç—Å—è –¥–æ —Ç–æ–≥–æ, –∫–∞–∫ –ø–æ–ø–∞–¥–∞–µ—Ç –≤ –æ–±—Ä–∞–±–æ—Ç—á–∏–∫ `app.post('/api/game/bot')`.

## üîß –í–æ–∑–º–æ–∂–Ω—ã–µ —Ä–µ—à–µ–Ω–∏—è

### –í–∞—Ä–∏–∞–Ω—Ç 1: –û—Ç–∫–ª—é—á–∏—Ç—å auth –≤—Ä–µ–º–µ–Ω–Ω–æ –¥–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è
```typescript
// –í src/server/rest.ts
if (req.path === '/api/game/bot') {
  // –î–ª—è —Ç–µ—Å—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –ø—Ä–æ–ø—É—Å–∫–∞–µ–º auth
  return next();
}
```

### –í–∞—Ä–∏–∞–Ω—Ç 2: –ò—Å–ø—Ä–∞–≤–∏—Ç—å –ø–æ—Ä—è–¥–æ–∫ —Ä–µ–≥–∏—Å—Ç—Ä–∞—Ü–∏–∏ —Ä–æ—É—Ç–æ–≤
–ü–µ—Ä–µ–º–µ—Å—Ç–∏—Ç—å `app.post('/api/game/bot')` –≤ –æ—Ç–¥–µ–ª—å–Ω—ã–π —Ä–æ—É—Ç–µ—Ä, –∫–æ—Ç–æ—Ä—ã–π —Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä—É–µ—Ç—Å—è –î–û auth middleware.

### –í–∞—Ä–∏–∞–Ω—Ç 3: –ò—Å–ø–æ–ª—å–∑–æ–≤–∞—Ç—å WebSocket –≤–º–µ—Å—Ç–æ REST
–°–æ–∑–¥–∞–Ω–∏–µ –∏–≥—Ä—ã —á–µ—Ä–µ–∑ WebSocket —Å–æ–±—ã—Ç–∏–µ, –≥–¥–µ auth –ø—Ä–æ–≤–µ—Ä—è–µ—Ç—Å—è –æ–¥–∏–Ω —Ä–∞–∑ –ø—Ä–∏ –ø–æ–¥–∫–ª—é—á–µ–Ω–∏–∏.

## üìù –ß—Ç–æ –Ω—É–∂–Ω–æ —Å–¥–µ–ª–∞—Ç—å

1. –ù–∞–∂–∞—Ç—å –∫–Ω–æ–ø–∫—É "–ü—Ä–æ—Ç–∏–≤ –±–æ—Ç–∞" –≤ Telegram MiniApp
2. –ü–æ—Å–º–æ—Ç—Ä–µ—Ç—å –ª–æ–≥–∏: `pm2 logs seabattle | grep -i 'bot'`
3. –ü—Ä–æ–≤–µ—Ä–∏—Ç—å, –µ—Å—Ç—å –ª–∏ –≤ –ª–æ–≥–∞—Ö:
   - `Auth middleware - path: /api/game/bot`
   - `POST /api/game/bot - request received`

–ï—Å–ª–∏ —ç—Ç–∏—Ö –ª–æ–≥–æ–≤ –Ω–µ—Ç - —Ä–æ—É—Ç –Ω–µ –∑–∞—Ä–µ–≥–∏—Å—Ç—Ä–∏—Ä–æ–≤–∞–Ω –ø—Ä–∞–≤–∏–ª—å–Ω–æ.

