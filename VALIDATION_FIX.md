# Исправление валидации размещения кораблей

## Проблема
- Можно разместить больше кораблей, чем нужно (например, больше 1 корабля размером 4)
- Корабли не должны касаться друг друга

## Решение
Добавлена **клиентская валидация** при размещении кораблей:

1. **Проверка занятости клеток** - корабль не может быть размещён на уже занятой клетке
2. **Проверка касаний** - корабли не могут касаться друг друга (включая диагональные углы)
3. **Проверка количества** - в кнопках показывается сколько кораблей уже размещено и максимальное количество

## Изменения

### src/client/components/GameBoard.tsx

```typescript
import { isValidShipPlacement } from '../../domain/rules';
import type { RuleSet } from '../../domain/rules';

// Правила для валидации
const rules: RuleSet = {
  width,
  height,
  ships: [
    { size: 4, count: 1 },
    { size: 3, count: 2 },
    { size: 2, count: 3 },
    { size: 1, count: 4 },
  ],
  allowDiagonal: false,
  touchProhibited: true,
};

// В handleCellClick:
// 1. Проверка что клетка не занята
const isOccupied = board.ships.some((ship) =>
  ship.positions.some((p) =>
    positions.some((np) => np.x === p.x && np.y === p.y)
  )
);

// 2. Валидация размещения (касаний)
if (!isValidShipPlacement(newShip, board, board.ships, rules)) {
  return;
}
```

## Что теперь работает

✅ **Нельзя разместить**:
- Больше 1 корабля 4x1
- Больше 2 кораблей 3x1
- Больше 3 кораблей 2x1
- Больше 4 кораблей 1x1

✅ **Нельзя разместить касающиеся корабли**:
- По горизонтали/вертикали
- По диагонали

✅ **Визуальная обратная связь**:
- Кнопки показывают `{current}/{max}` кораблей
- Отключены кнопки при достижении максимума

## Тестирование

Запусти игру и попробуй:
1. Разместить второй 4x1 корабль - кнопка отключится ✅
2. Разместить корабли касающимися - не получится ✅
3. Проверить что кнопки показывают правильный счётчик ✅

