# Правила игры

## Классический набор

Флот состоит из:

- 1 × Авианосец (4 клетки)
- 2 × Линкор (3 клетки)
- 3 × Эсминец (2 клетки)
- 4 × Подлодка (1 клетка)

Итого: 10 кораблей, 20 клеток

## Размещение

### Правила

1. Корабли размещаются горизонтально или вертикально
2. Диагональное размещение запрещено
3. Корабли не должны касаться друг друга (даже по углам)
4. Границы доски (0-9)

### Валидация

```typescript
// Правило касания
if (touchProhibited) {
  if (shipsShareAdjacentCells(ship1, ship2)) {
    return false;
  }
}
```

## Игровой процесс

### Ходы

- Первый ход определяется случайно
- Игроки стреляют по очереди
- После промаха ход переходит к противнику
- После попадания игрок продолжает ходить

### Результаты выстрела

- **MISS**: Пусто, клетка помечается как промах
- **HIT**: Клетка с кораблем, помечается как попадание
- **SINK**: Все клетки корабля попадают, корабль потоплен

### Победа

Игрок побеждает, когда потоплены все корабли противника (4 = авианосец, 3+3 = линкоры, 2+2+2 = эсминцы, 1+1+1+1 = подлодки).

## JSON Конфигурация

```json
{
  "ships": [
    { "size": 4, "count": 1 },
    { "size": 3, "count": 2 },
    { "size": 2, "count": 3 },
    { "size": 1, "count": 4 }
  ]
}
```

## Расширение правил

Добавьте новый `RuleSet` в БД:

```typescript
await prisma.ruleSet.create({
  data: {
    name: 'large_sea',
    width: 15,
    height: 15,
    shipsJson: JSON.stringify({
      ships: [
        { size: 5, count: 2 },
        { size: 4, count: 3 },
        { size: 3, count: 4 },
        { size: 2, count: 5 }
      ]
    })
  }
});
```

